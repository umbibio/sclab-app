# SCLab-App Constructor Configuration
name: SCLab-App
version: 0.1.0
company: umbibio
license_file: LICENSE.txt

channels:
  - conda-forge
  - bioconda

specs:
  # Base Python environment
  - python=3.12
  - pip
  
  # Core scientific computing
  - numpy<2.2
  - pandas
  - matplotlib
  - scikit-learn
  - tqdm
  - requests
  
  # Single-cell specific
  - anndata
  - scanpy
  - h5py  # For .h5/.h5ad support
  - igraph
  - python-igraph
  - leidenalg
  
  # Jupyter ecosystem
  - jupyterlab>=4.3.6
  - ipywidgets
  - voila>=0.5
  - nodejs  # For JupyterLab extensions
  
  # Visualization
  - plotly<6.0
  - itables<2.4
  
  # Additional dependencies
  - anywidget
  - ripser>=0.6.12
  - svgpathtools
  
  # Install SCLab and SCLab-App via pip
  - pip:
    - sclab>=0.3.0
    - scikit-misc>=0.5.1
    - scrublet>=0.2.3
    - typer>=0.9.0
    # Install this project from a locally built wheel
    - dist/sclab_app-0.1.0-py3-none-any.whl

# Installer customization
installer_filename: SCLab-App-{{ version }}-{{ platform }}

# Welcome screen
welcome_text: |
  Welcome to SCLab-App!
  
  SCLab-App is an interactive single-cell analysis toolkit that provides 
  a seamless interface for analyzing and visualizing single-cell RNA 
  sequencing data.
  
  After installation, you can launch SCLab-App in several ways:
  • SCLab-App: Full JupyterLab environment (auto-opens browser)
  • SCLab-App Dashboard: Streamlined analysis dashboard
  • SCLab-App Server: Start server only (manual browser navigation)
  
  Default analysis notebooks will be created in your Documents folder.

# License
license_file: LICENSE.txt

# Post-install script to set up launchers and notebooks
post_install: scripts/setup_sclab_app.py

# Include default notebooks and assets
extra_files:
  - src: notebooks/
    dst: share/sclab-app/notebooks/
  - src: assets/
    dst: share/sclab-app/assets/

# Installation options
default_prefix: "{{ home }}/Documents/SCLab-App"
register_python: false
initialize_by_default: false
create_shortcuts: true
add_to_path: false

# Platform-specific configurations
installer_type: exe  # Will be overridden per platform

# Batch/silent installation support
batch_mode: false

# Don't pin package versions too strictly for flexibility
update_dependencies: true
